-- Active: 1702947609752@@127.0.0.1@3306@fp_mbd
-- Active: 1702947609752@@127.0.0.1@3306
CREATE DATABASE fp_mbd
    DEFAULT CHARACTER SET = 'utf8mb4';

USE fp_mbd;

CREATE TABLE Penjual (
    id_penjual CHAR(5) PRIMARY KEY,
    nama_penjual VARCHAR(100),
    email_penjual VARCHAR(100),
    password_penjual VARCHAR(100),
    status_penjual INT
);

CREATE TABLE Pembeli (
    id_pembeli CHAR(5) PRIMARY KEY,
    nama_pembeli VARCHAR(100),
    email_pembeli VARCHAR(100),
    password_pembeli VARCHAR(100)
);

CREATE TABLE Pegawai (
    nik CHAR(16) PRIMARY KEY,
    nama_pegawai VARCHAR(100),
    email_pegawai VARCHAR(100),
    password_pegawai VARCHAR(100),
    penjual_pg_id_penjual CHAR(5),
    FOREIGN KEY (penjual_pg_id_penjual) REFERENCES Penjual(id_penjual)
);

CREATE TABLE Menu (
    id_menu CHAR(5) PRIMARY KEY,
    nama_menu VARCHAR(100),
    durasi_memasak VARCHAR(8),
    stok_menu INT,
    harga_menu DECIMAL(7,2),
    jenis_menu VARCHAR(50),
    penjual_me_id_penjual CHAR(5),
    FOREIGN KEY (penjual_me_id_penjual) REFERENCES Penjual(id_penjual)
);

CREATE TABLE Pesanan (
    id_pesanan CHAR(5) PRIMARY KEY,
    waktu_pesanan TIMESTAMP,
    pembeli_ps_id_pembeli CHAR(5),
    penjual_ps_id_penjual CHAR(5),
    FOREIGN KEY (pembeli_ps_id_pembeli) REFERENCES Pembeli(id_pembeli),
    FOREIGN KEY (penjual_ps_id_penjual) REFERENCES Penjual(id_penjual)
);

CREATE TABLE Pesanan_Menu (
    pesanan_pm_id_pesanan CHAR(5),
    menu_id_menu CHAR(5),
    FOREIGN KEY (pesanan_pm_id_pesanan) REFERENCES Pesanan(id_pesanan),
    FOREIGN KEY (menu_id_menu) REFERENCES Menu(id_menu)
);

CREATE TABLE Detail_Pesanan (
    id_detail_pesanan CHAR(5) PRIMARY KEY,
    jumlah_menu INT,
    total_harga DECIMAL(7,2),
    catatan_khusus VARCHAR(100),
    status_pesanan VARCHAR(100),
    pesanan_dp_id_pesanan CHAR(5),
    FOREIGN KEY (pesanan_dp_id_pesanan) REFERENCES Pesanan(id_pesanan)
);


INSERT INTO Penjual (id_penjual, nama_penjual, email_penjual, password_penjual, status_penjual) 
VALUES 
('P0001', 'Warung Makan Sederhana', 'warungmakan@example.com', 'password123', 1),
('P0002', 'Restoran Seafood Enak', 'seafoodenak@example.com', 'secretpass456', 0),
('P0003', 'Kafe Santai', 'kafe_santai@example.com', 'mypassword789', 1),
('P0004', 'Pizzeria Lezat', 'pizzeria_lezat@example.com', 'pizza1234', 1),
('P0005', 'Nasi Goreng Mantap', 'nasigoreng@example.com', 'nasigoreng123', 1),
('P0006', 'Makan Steak', 'steakpremium@example.com', 'steakpass789', 0),
('P0007', 'Sushi Express', 'sushiexpress@example.com', 'sushi456', 0),
('P0008', 'Bakso Gila', 'baksogila@example.com', 'bakso789', 0),
('P0009', 'Pecel Lele Asli', 'pecellele@example.com', 'pecel1234', 1),
('P0010', 'Warung Mie Ayam Legendaris', 'mieayamlegendaris@example.com', 'mieayam567', 1),
('P0011', 'Kafe Indie', 'kafeindie@example.com', 'indiepass123', 0),
('P0012', 'Roti Bakar Spesial', 'rotibakar@example.com', 'rotipass456', 1),
('P0013', 'Burger Kingdom', 'burgerkingdom@example.com', 'burger789', 1),
('P0014', 'Tahu Tek Tek', 'tahutektek@example.com', 'tektek1234', 0),
('P0015', 'Martabak Enak', 'martabakenak@example.com', 'martabak567', 1),
('P0016', 'Kedai Es Krim', 'es_krim@example.com', 'eskrimpass123', 1),
('P0017', 'Lumpia Basah Spesial', 'lumpiabasah@example.com', 'lumpia456', 0),
('P0018', 'Cafe Bioskop', 'cafebioskop@example.com', 'bioskop789', 0),
('P0019', 'Ayam Geprek Mantul', 'ayamgeprek@example.com', 'geprek1234', 1),
('P0020', 'Pancake House', 'pancakehouse@example.com', 'pancake567', 0),
('P0021', 'Warung Bebek Goreng', 'bebekgoreng@example.com', 'bebekgoreng123', 1),
('P0022', 'Sate Kambing Juara', 'satekambing@example.com', 'satepass456', 0),
('P0023', 'Dimsum King', 'dimsumking@example.com', 'dimsum789', 0),
('P0024', 'Sop Buntut Lezat', 'sopbuntut@example.com', 'sopbuntut1234', 0),
('P0025', 'Kopi Kenangan', 'kopikenangan@example.com', 'kopipass567', 0),
('P0026', 'Pisang Goreng Nugget', 'pisangnugget@example.com', 'nugget123', 0),
('P0027', 'Lontong Balap Khas Surabaya', 'lontongbalap@example.com', 'lontong789', 1),
('P0028', 'Martabak Manis Keju Coklat', 'martabakmanis@example.com', 'martabakmanis456', 0),
('P0029', 'Bubur Ayam Spesial', 'buburayam@example.com', 'buburayam123', 0),
('P0030', 'Gulai Kambing Nusantara', 'gulaikambing@example.com', 'gulaikambing567', 0),
('P0031', 'Cendol Durian Medan', 'cendoldurian@example.com', 'cendol789', 0),
('P0032', 'Pempek Palembang Enak', 'pempekpalembang@example.com', 'pempek1234', 0),
('P0033', 'Tekwan Authentic', 'tekwanauthentic@example.com', 'tekwan567', 0),
('P0034', 'Soto Betawi Asli', 'sotobetawi@example.com', 'soto789', 0),
('P0035', 'Nasi Uduk Jakarta', 'nasudukjakarta@example.com', 'nasuduk1234', 0),
('P0036', 'Es Campur Segar', 'escampur@example.com', 'escampur567', 1),
('P0037', 'Ombens', 'ombens@example.com', 'ombens123', 1),
('P0038', 'Bu Sol', 'buSol@example.com', 'Busol567', 1),
('P0039', 'Mak Nanun', 'nanuni@example.com', 'nanuni5sd67', 1),
('P0040', 'Kantin Mungil', 'mungilkah@example.com', 'IYANich567', 1);

SELECT * FROM Penjual;

INSERT INTO Pembeli (id_pembeli, nama_pembeli, email_pembeli, password_pembeli)
VALUES 
('C0001', 'Adi Cahyono', 'adi.cahyono@example.com', 'adicahyono123'),
('C0002', 'Budi Santoso', 'budi.santoso@example.com', 'budisantoso456'),
('C0003', 'Citra Wijaya', 'citra.wijaya@example.com', 'citrawijaya789'),
('C0004', 'Dewi Lestari', 'dewi.lestari@example.com', 'dewilestari123'),
('C0005', 'Eka Putri', 'eka.putri@example.com', 'ekaputri456'),
('C0006', 'Fajar Nugroho', 'fajar.nugroho@example.com', 'fajarnugroho789'),
('C0007', 'Galih Pratama', 'galih.pratama@example.com', 'galihpratama123'),
('C0008', 'Hana Maharani', 'hana.maharani@example.com', 'hanamaharani456'),
('C0009', 'Irfan Setiawan', 'irfan.setiawan@example.com', 'irfansetiawan789'),
('C0010', 'Joko Susanto', 'joko.susanto@example.com', 'jokosusanto123'),
('C0011', 'Krisna Wardhana', 'krisna.wardhana@example.com', 'krisnawardhana456'),
('C0012', 'Larasati Putri', 'larasati.putri@example.com', 'larasatiputri789'),
('C0013', 'Mega Pratiwi', 'mega.pratiwi@example.com', 'megapratiwi123'),
('C0014', 'Nanda Saputra', 'nanda.saputra@example.com', 'nandasaputra456'),
('C0015', 'Oky Darmawan', 'oky.darmawan@example.com', 'okydarmawan789'),
('C0016', 'Putri Aulia', 'putri.aulia@example.com', 'putriaulia123'),
('C0017', 'Rama Wijaya', 'rama.wijaya@example.com', 'ramawijaya456'),
('C0018', 'Sari Indah', 'sari.indah@example.com', 'sariindah789'),
('C0019', 'Tono Susilo', 'tono.susilo@example.com', 'tonosusilo123'),
('C0020', 'Ulfa Nurul', 'ulfa.nurul@example.com', 'ulfanurul456'),
('C0021', 'Vina Rosalina', 'vina.rosalina@example.com', 'vinarosalina789'),
('C0022', 'Wahyu Prabowo', 'wahyu.prabowo@example.com', 'wahyuprabowo123'),
('C0023', 'Xena Putri', 'xena.putri@example.com', 'xenaputri456'),
('C0024', 'Yoga Pratama', 'yoga.pratama@example.com', 'yogapratama789'),
('C0025', 'Zara Damayanti', 'zara.damayanti@example.com', 'zaradamayanti123'),
('C0026', 'Andi Nugraha', 'andi.nugraha@example.com', 'andinugraha456'),
('C0027', 'Bunga Lestari', 'bunga.lestari@example.com', 'bungalestari789'),
('C0028', 'Cici Maulida', 'cici.maulida@example.com', 'cicimaulida123'),
('C0029', 'Dodi Santoso', 'dodi.santoso@example.com', 'dodisantoso456'),
('C0030', 'Eko Suryadi', 'eko.suryadi@example.com', 'ekosuryadi789'),
('C0031', 'Fira Cantika', 'fira.cantika@example.com', 'firacantika123'),
('C0032', 'Galang Pradana', 'galang.pradana@example.com', 'galangpradana456'),
('C0033', 'Hani Damayanti', 'hani.damayanti@example.com', 'hanidamayanti789'),
('C0034', 'Irfan Hidayat', 'irfan.hidayat@example.com', 'irfanhidayat123'),
('C0035', 'Jeni Kartika', 'jeni.kartika@example.com', 'jenikartika456'),
('C0036', 'Krisna Putra', 'krisna.putra@example.com', 'krisnaputra789'),
('C0037', 'Lina Dewi', 'lina.dewi@example.com', 'linadewi123'),
('C0038', 'Mira Ayu', 'mira.ayu@example.com', 'miraayu456'),
('C0039', 'Nadia Fitri', 'nadia.fitri@example.com', 'nadiafitri789'),
('C0040', 'Oki Setiawan', 'oki.setiawan@example.com', 'okisetiawan123');

SELECT * FROM Pembeli;

INSERT INTO Pegawai (nik, nama_pegawai, email_pegawai, password_pegawai, penjual_pg_id_penjual)
VALUES
('7682154936278592', 'Rina Fitriana', 'rina.fitriana@example.com', 'pass123', 'P0001'),
('9013746281937462', 'Budi Santoso', 'budi.santoso@example.com', 'budi456', 'P0002'),
('5129374658123490', 'Siti Nurul', 'siti.nurul@example.com', 'siti789', 'P0003'),
('6048912375648392', 'Ahmad Maulana', 'ahmad.maulana@example.com', 'ahmad1234', 'P0004'),
('2198743650219348', 'Dewi Kartika', 'dewi.kartika@example.com', 'dewi567', 'P0005'),
('9302874619283740', 'Ferry Kurniawan', 'ferry.kurniawan@example.com', 'ferry789', 'P0006'),
('6574890123748592', 'Linda Wijaya', 'linda.wijaya@example.com', 'linda1234', 'P0007'),
('4820957682190347', 'Denny Setiawan', 'denny.setiawan@example.com', 'denny567', 'P0008'),
('7635940281749201', 'Ratna Sari', 'ratna.sari@example.com', 'ratna789', 'P0009'),
('2394875019874562', 'Indra Saputra', 'indra.saputra@example.com', 'indra1234', 'P0010'),
('1098743658734502', 'Nina Susanto', 'nina.susanto@example.com', 'nina567', 'P0011'),
('9203847109832475', 'Yoga Pratama', 'yoga.pratama@example.com', 'yoga789', 'P0012'),
('1946570384759283', 'Rudi Hermawan', 'rudi.hermawan@example.com', 'rudi1234', 'P0013'),
('8097346501293847', 'Tia Setiani', 'tia.setiani@example.com', 'tia567', 'P0014'),
('6758391023456789', 'Adi Nugroho', 'adi.nugroho@example.com', 'adi789', 'P0015'),
('8237465912038746', 'Rina Amelia', 'rina.amelia@example.com', 'rina1234', 'P0016'),
('5074896132583749', 'Hendra Wijaya', 'hendra.wijaya@example.com', 'hendra567', 'P0017'),
('3948561279856341', 'Maya Dewi', 'maya.dewi@example.com', 'maya789', 'P0018'),
('9864570382475931', 'Joko Prasetyo', 'joko.prasetyo@example.com', 'joko1234', 'P0019'),
('8759346570283451', 'Nisa Ramadhani', 'nisa.ramadhani@example.com', 'nisa567', 'P0020'),
('5610923847561982', 'Arif Setiawan', 'arif.setiawan@example.com', 'arif789', 'P0021'),
('3490875649203841', 'Dini Fitriani', 'dini.fitriani@example.com', 'dini1234', 'P0022'),
('6574902384759283', 'Andi Kurniawan', 'andi.kurniawan@example.com', 'andi567', 'P0023'),
('9023845671048237', 'Eka Putri', 'eka.putri@example.com', 'eka789', 'P0024'),
('4568721093847659', 'Ricky Pratama', 'ricky.pratama@example.com', 'ricky1234', 'P0025'),
('6758391029384756', 'Sinta Wijaya', 'sinta.wijaya@example.com', 'sinta567', 'P0026'),
('1293846570982374', 'Bambang Setiawan', 'bambang.setiawan@example.com', 'bambang789', 'P0027'),
('8745932058293471', 'Ayu Triana', 'ayu.triana@example.com', 'ayu1234', 'P0028'),
('3092847651928374', 'Dodo Santoso', 'dodo.santoso@example.com', 'dodo567', 'P0029'),
('6570982347619832', 'Rina Supriyanto', 'rina.supriyanto@example.com', 'rina789', 'P0030'),
('8934721908347561', 'Fahmi Abdullah', 'fahmi.abdullah@example.com', 'fahmi1234', 'P0031'),
('2349875012983467', 'Siti Rahayu', 'siti.rahayu@example.com', 'siti567', 'P0032'),
('1098374657834502', 'Agus Hermanto', 'agus.hermanto@example.com', 'agus789', 'P0033'),
('9408765923846751', 'Rudi Saputra', 'rudi.saputra@example.com', 'rudi1234', 'P0034'),
('6750923846571098', 'Dini Ramadhani', 'dini.ramadhani@example.com', 'dini567', 'P0035'),
('8273649087654301', 'Andi Kusuma', 'andi.kusuma@example.com', 'andi789', 'P0036'),
('9508267346981278', 'Rina Maulida', 'rina.maulida@example.com', 'rina123', 'P0037'),
('1234567890123456', 'Budi Solihin', 'budi.solihin@example.com', 'budi567', 'P0038'),
('9876543210987654', 'Nanun Makmur', 'nanun.makmur@example.com', 'nanun789', 'P0039'),
('1231234564567897', 'Lia Susanti', 'lia.susanti@example.com', 'lia123', 'P0040');

SELECT * FROM Pegawai;

INSERT INTO Menu (id_menu, nama_menu, durasi_memasak, stok_menu, harga_menu, jenis_menu, penjual_me_id_penjual)
VALUES
('M0001', 'Nasi Goreng Spesial', '00:15:00', 50, 25000.00, 'Makanan', 'P0001'),
('M0002', 'Udang Bakar', '00:20:00', 30, 45000.00, 'Makanan', 'P0002'),
('M0003', 'Kopi Santai', '00:05:00', 100, 15000.00, 'Minuman', 'P0003'),
('M0004', 'Pizza Margherita', '00:25:00', 40, 35000.00, 'Makanan', 'P0004'),
('M0005', 'Nasi Goreng Spicy', '00:18:00', 60, 28000.00, 'Makanan', 'P0005'),
('M0006', 'Steak Wagyu', '00:30:00', 20, 90000.00, 'Makanan', 'P0006'),
('M0007', 'Sushi Set', '00:22:00', 25, 50000.00, 'Makanan', 'P0007'),
('M0008', 'Bakso Urat', '00:12:00', 45, 18000.00, 'Makanan', 'P0008'),
('M0009', 'Pecel Lele Pedas', '00:17:00', 35, 22000.00, 'Makanan', 'P0009'),
('M0010', 'Mie Ayam Spesial', '00:14:00', 55, 19000.00, 'Makanan', 'P0010'),
('M0011', 'Kopi Arabika', '00:06:00', 120, 17000.00, 'Minuman', 'P0011'),
('M0012', 'Roti Bakar Coklat', '00:08:00', 80, 12000.00, 'Makanan', 'P0012'),
('M0013', 'Burger King Size', '00:16:00', 40, 35000.00, 'Makanan', 'P0013'),
('M0014', 'Tahu Tek Telor', '00:10:00', 70, 15000.00, 'Makanan', 'P0014'),
('M0015', 'Martabak Keju', '00:18:00', 50, 25000.00, 'Makanan', 'P0015'),
('M0016', 'Es Krim Double Scoop', '00:05:00', 90, 18000.00, 'Makanan', 'P0016'),
('M0017', 'Lumpia Basah Manis', '00:08:00', 65, 14000.00, 'Makanan', 'P0017'),
('M0018', 'Popcorn Caramel', '00:04:00', 110, 10000.00, 'Makanan', 'P0018'),
('M0019', 'Ayam Geprek Super Pedas', '00:15:00', 30, 27000.00, 'Makanan', 'P0019'),
('M0020', 'Pancake Premium', '00:10:00', 75, 20000.00, 'Makanan', 'P0020'),
('M0021', 'Bebek Goreng Set', '00:20:00', 35, 32000.00, 'Makanan', 'P0021'),
('M0022', 'Sate Kambing Special', '00:18:00', 25, 40000.00, 'Makanan', 'P0022'),
('M0023', 'Dimsum Combo', '00:12:00', 60, 23000.00, 'Makanan', 'P0023'),
('M0024', 'Sop Buntut Super', '00:25:00', 40, 28000.00, 'Makanan', 'P0024'),
('M0025', 'Kopi Kenangan Premium', '00:08:00', 85, 22000.00, 'Minuman', 'P0025'),
('M0026', 'Pisang Nugget Keju', '00:10:00', 70, 12000.00, 'Makanan', 'P0026'),
('M0027', 'Lontong Balap Paket', '00:15:00', 45, 18000.00, 'Makanan', 'P0027'),
('M0028', 'Martabak Manis Combo', '00:20:00', 35, 25000.00, 'Makanan', 'P0028'),
('M0029', 'Bubur Ayam Spesial', '00:10:00', 60, 14000.00, 'Makanan', 'P0029'),
('M0030', 'Gulai Kambing Nusantara', '00:28:00', 30, 38000.00, 'Makanan', 'P0030'),
('M0031', 'Cendol Durian Segar', '00:07:00', 95, 16000.00, 'Minuman', 'P0031'),
('M0032', 'Pempek Palembang Khas', '00:22:00', 40, 27000.00, 'Makanan', 'P0032'),
('M0033', 'Tekwan Spesial', '00:12:00', 55, 19000.00, 'Makanan', 'P0033'),
('M0034', 'Soto Betawi Asli', '00:20:00', 35, 22000.00, 'Makanan', 'P0034'),
('M0035', 'Nasi Uduk Komplit', '00:15:00', 50, 18000.00, 'Makanan', 'P0035'),
('M0036', 'Es Campur Segar', '00:05:00', 80, 12000.00, 'Minuman', 'P0036'),
('M0037', 'Es Teh Tarik', '00:05:00', 75, 15000.00, 'Minuman', 'P0037'),
('M0038', 'Nutrisari Jeruk', '00:05:00', 2, 10000.00, 'Minuman', 'P0037'),
('M0039', 'Es Jeruk', '00:05:00', 4, 7000.00, 'Minuman', 'P0037'),
('M0040', 'Es Teh', '00:05:00', 20, 6000.00, 'Minuman', 'P0037'),
('M0041', 'Es Matcha', '00:05:00', 2, 7500.00, 'Minuman', 'P0037'),
('M0042', 'Ice Milk Tea', '00:05:00', 12, 7000.00, 'Minuman', 'P0037'),
('M0043', 'Kopi Panas', '00:05:00', 3, 7000.00, 'Minuman', 'P0037'),
('M0044', 'Es Moccacino', '00:05:00', 4, 7500.00, 'Minuman', 'P0037'),
('M0045', 'Chocolate Blend', '00:08:00', 10, 8000.00, 'Minuman', 'P0037'),
('M0046', 'Ice Good Day', '00:05:00', 3, 7500.00, 'Minuman', 'P0037'),
('M0047', 'Nasi Kuning', '00:04:00', 110, 8000.00, 'Makanan', 'P0038'),
('M0048', 'Chicken Crispy', '00:08:00', 12, 13000.00, 'Makanan', 'P0038'),
('M0049', 'Batagor', '00:01:00', 3, 6000.00, 'Makanan', 'P0038'),
('M0050', 'Nasi Cumi Hitam', '00:07:00', 4, 14000.00, 'Makanan', 'P0038'),
('M0051', 'Nasi Pecel', '00:07:00', 20, 14000.00, 'Makanan', 'P0038'),
('M0052', 'Nasi Ayam Goreng', '00:10:00', 12, 8000.00, 'Makanan', 'P0038'),
('M0053', 'Nasi Dendeng', '00:10:00', 2, 12000.00, 'Makanan', 'P0038'),
('M0054', 'Nasi Chicken Grill', '00:10:00', 12, 12000.00, 'Makanan', 'P0038'),
('M0055', 'Nasi Ayam Cabe', '00:10:00', 20, 16000.00, 'Makanan', 'P0038'),
('M0056', 'Nasi Goreng', '00:10:00', 30, 11000.00, 'Makanan', 'P0038'),
('M0057', 'Nasi Rawon', '00:10:00', 30, 20000.00, 'Makanan', 'P0039'),
('M0058', 'Kwetiau Goreng', '00:12:00', 15, 16000.00, 'Makanan', 'P0039'),
('M0059', 'Mie Ayam Pangsit', '00:08:00', 15, 14000.00, 'Makanan', 'P0039'),
('M0060', 'Mie Ayam Pangsit Bakso', '00:08:00', 14, 16000.00, 'Makanan', 'P0039'),
('M0061', 'Mie Ayam Pangsit Ceker', '00:10:00', 10, 16000.00, 'Makanan', 'P0039'),
('M0062', 'Pisang Goreng', '00:05:00', 3, 6000.00, 'Makanan', 'P0039'),
('M0063', 'Pentol', '00:05:00', 2, 6000.00, 'Makanan', 'P0039'),
('M0064', 'Nasi Rames', '00:07:00', 17, 14000.00, 'Makanan', 'P0039'),
('M0065', 'Nasi Campur', '00:07:00', 19, 14000.00, 'Makanan', 'P0039'),
('M0066', 'Kopi ABC', '00:01:00', 15, 10000.00, 'Minuman', 'P0040'),
('M0067', 'Larutan', '00:01:00', 3, 6000.00, 'Minuman', 'P0040'),
('M0068', 'Ultra Milk', '00:01:00', 18, 9000.00, 'Minuman', 'P0040'),
('M0069', 'STee', '00:01:00', 8, 4000.00, 'Minuman', 'P0040'),
('M0070', 'Club', '00:01:00', 90, 3000.00, 'Minuman', 'P0040'),
('M0071', 'Pocari Sweat', '00:01:00', 21, 10000.00, 'Minuman', 'P0040'),
('M0072', 'Vit C', '00:01:00', 4, 9000.00, 'Minuman', 'P0040'),
('M0073', 'Teh Botol', '00:01:00', 26, 10000.00, 'Minuman', 'P0040'),
('M0074', 'Kopi Kenangan', '00:01:00', 14, 10000.00, 'Minuman', 'P0040'),
('M0075', 'Fanta', '00:01:00', 3, 8000.00, 'Minuman', 'P0040');

SELECT * FROM Menu;

INSERT INTO Pesanan (id_pesanan, waktu_pesanan, pembeli_ps_id_pembeli, penjual_ps_id_penjual)
VALUES
('PS001', '2023-12-15 08:30:00', 'C0001', 'P0001'),
('PS002', '2023-12-15 12:45:00', 'C0002', 'P0002'),
('PS003', '2023-12-15 09:21:00', 'C0003', 'P0003'),
('PS004', '2023-12-15 13:40:00', 'C0004', 'P0004'),
('PS005', '2023-12-15 14:35:00', 'C0005', 'P0005'),
('PS006', '2023-12-15 10:25:00', 'C0006', 'P0006'),
('PS007', '2023-12-15 11:00:00', 'C0007', 'P0007'),
('PS008', '2023-12-15 14:30:00', 'C0008', 'P0008'),
('PS009', '2023-12-15 08:50:00', 'C0009', 'P0009'),
('PS010', '2023-12-15 17:00:00', 'C0010', 'P0010'),
('PS011', '2023-12-15 07:05:00', 'C0011', 'P0011'),
('PS012', '2023-12-15 08:05:00', 'C0012', 'P0012'),
('PS013', '2023-12-15 10:10:00', 'C0013', 'P0013'),
('PS014', '2023-12-15 15:05:00', 'C0014', 'P0014'),
('PS015', '2023-12-15 13:08:00', 'C0015', 'P0015'),
('PS016', '2023-12-15 10:02:00', 'C0016', 'P0016'),
('PS017', '2023-12-15 08:10:00', 'C0017', 'P0017'),
('PS018', '2023-12-15 15:15:00', 'C0018', 'P0018'),
('PS019', '2023-12-15 10:06:00', 'C0019', 'P0019'),
('PS020', '2023-12-15 12:15:00', 'C0020', 'P0020'),
('PS021', '2023-12-15 14:35:00', 'C0021', 'P0037'),
('PS022', '2023-12-15 13:30:00', 'C0022', 'P0037'),
('PS023', '2023-12-15 12:45:00', 'C0023', 'P0037'),
('PS024', '2023-12-15 14:25:00', 'C0024', 'P0037'),
('PS025', '2023-12-15 17:00:00', 'C0025', 'P0037'),
('PS026', '2023-12-15 11:40:00', 'C0026', 'P0037'),
('PS027', '2023-12-15 10:55:00', 'C0027', 'P0037'),
('PS028', '2023-12-15 15:30:00', 'C0028', 'P0037'),
('PS029', '2023-12-15 08:30:00', 'C0001', 'P0037'),
('PS030', '2023-12-15 17:00:00', 'C0002', 'P0037'),
('PS031', '2023-12-15 11:08:00', 'C0003', 'P0037'),
('PS032', '2023-12-15 13:10:00', 'C0004', 'P0037'),
('PS033', '2023-12-15 08:30:00', 'C0005', 'P0037'),
('PS034', '2023-12-15 17:00:00', 'C0006', 'P0037'),
('PS035', '2023-12-15 11:08:00', 'C0007', 'P0037'),
('PS036', '2023-12-15 08:08:00', 'C0036', 'P0038'),
('PS037', '2023-12-15 08:05:00', 'C0037', 'P0038'),
('PS038', '2023-12-15 10:10:00', 'C0038', 'P0038'),
('PS039', '2023-12-15 13:00:00', 'C0039', 'P0038'),
('PS040', '2023-12-15 09:07:00', 'C0040', 'P0038'),
('PS041', '2023-12-15 12:35:00', 'C0029', 'P0038'),
('PS042', '2023-12-15 10:30:00', 'C0031', 'P0038'),
('PS043', '2023-12-15 16:45:00', 'C0032', 'P0038'),
('PS044', '2023-12-15 11:25:00', 'C0033', 'P0038'),
('PS045', '2023-12-15 17:00:00', 'C0034', 'P0038'),
('PS046', '2023-12-15 08:40:00', 'C0035', 'P0038'),
('PS047', '2023-12-15 07:55:00', 'C0008', 'P0038'),
('PS048', '2023-12-15 12:30:00', 'C0009', 'P0038'),
('PS049', '2023-12-15 09:30:00', 'C0010', 'P0038'),
('PS050', '2023-12-15 10:15:00', 'C0011', 'P0038'),
('PS051', '2023-12-15 14:35:00', 'C0011', 'P0039'),
('PS052', '2023-12-15 13:30:00', 'C0012', 'P0039'),
('PS053', '2023-12-15 09:45:00', 'C0013', 'P0039'),
('PS054', '2023-12-15 14:25:00', 'C0014', 'P0039'),
('PS055', '2023-12-15 13:08:00', 'C0015', 'P0039'),
('PS056', '2023-12-15 10:02:00', 'C0016', 'P0039'),
('PS057', '2023-12-15 08:10:00', 'C0017', 'P0039'),
('PS058', '2023-12-15 15:15:00', 'C0018', 'P0039'),
('PS059', '2023-12-15 10:06:00', 'C0019', 'P0039'),
('PS060', '2023-12-15 12:15:00', 'C0020', 'P0039'),
('PS061', '2023-12-15 14:35:00', 'C0021', 'P0039'),
('PS062', '2023-12-15 13:30:00', 'C0022', 'P0039'),
('PS063', '2023-12-15 16:45:00', 'C0023', 'P0039'),
('PS064', '2023-12-15 14:25:00', 'C0024', 'P0039'),
('PS065', '2023-12-15 13:08:00', 'C0025', 'P0039'),
('PS066', '2023-12-15 10:02:00', 'C0026', 'P0039'),
('PS067', '2023-12-15 08:10:00', 'C0017', 'P0040'),
('PS068', '2023-12-15 15:15:00', 'C0018', 'P0040'),
('PS069', '2023-12-15 10:06:00', 'C0019', 'P0040'),
('PS070', '2023-12-15 12:15:00', 'C0020', 'P0040'),
('PS071', '2023-12-15 14:35:00', 'C0021', 'P0040'),
('PS072', '2023-12-15 13:30:00', 'C0022', 'P0040'),
('PS073', '2023-12-15 15:45:00', 'C0023', 'P0040'),
('PS074', '2023-12-15 14:25:00', 'C0024', 'P0040'),
('PS075', '2023-12-15 13:08:00', 'C0025', 'P0040'),
('PS076', '2023-12-15 10:02:00', 'C0011', 'P0040'),
('PS077', '2023-12-15 10:12:00', 'C0027', 'P0040'),
('PS078', '2023-12-15 10:22:00', 'C0012', 'P0040'),
('PS079', '2023-12-15 10:32:00', 'C0009', 'P0040'),
('PS080', '2023-12-15 10:42:00', 'C0004', 'P0040'),
('PS081', '2023-12-13 10:30:00', 'C0010', 'P0038'),
('PS082', '2023-12-14 12:30:00', 'C0010', 'P0038');

SELECT * FROM Pesanan;

INSERT INTO Pesanan_Menu (pesanan_pm_id_pesanan, menu_id_menu)
VALUES
('PS001', 'M0001'),
('PS002', 'M0002'),
('PS003', 'M0003'),
('PS004', 'M0004'),
('PS005', 'M0005'),
('PS006', 'M0006'),
('PS007', 'M0007'),
('PS008', 'M0008'),
('PS009', 'M0009'),
('PS010', 'M0010'),
('PS011', 'M0011'),
('PS012', 'M0012'),
('PS013', 'M0013'),
('PS014', 'M0014'),
('PS015', 'M0015'),
('PS016', 'M0016'),
('PS017', 'M0017'),
('PS018', 'M0018'),
('PS019', 'M0019'),
('PS020', 'M0020'),
('PS021', 'M0040'),
('PS021', 'M0045'),
('PS022', 'M0038'),
('PS023', 'M0043'),
('PS023', 'M0044'),
('PS023', 'M0046'),
('PS024', 'M0040'),
('PS025', 'M0045'),
('PS026', 'M0046'),
('PS026', 'M0038'),
('PS027', 'M0039'),
('PS028', 'M0042'),
('PS029', 'M0037'),
('PS030', 'M0040'),
('PS030', 'M0040'),
('PS031', 'M0040'),
('PS032', 'M0039'),
('PS032', 'M0043'),
('PS032', 'M0042'),
('PS032', 'M0040'),
('PS033', 'M0044'),
('PS033', 'M0046'),
('PS034', 'M0041'),
('PS034', 'M0044'),
('PS034', 'M0046'),
('PS035', 'M0038'),
('PS036', 'M0047'),
('PS037', 'M0050'),
('PS037', 'M0049'),
('PS037', 'M0050'),
('PS038', 'M0051'),
('PS039', 'M0047'),
('PS039', 'M0050'),
('PS040', 'M0049'),
('PS041', 'M0048'),
('PS041', 'M0049'),
('PS042', 'M0051'),
('PS043', 'M0054'),
('PS043', 'M0048'),
('PS044', 'M0050'),
('PS045', 'M0052'),
('PS046', 'M0053'),
('PS047', 'M0056'),
('PS048', 'M0055'),
('PS048', 'M0050'),
('PS049', 'M0049'),
('PS049', 'M0055'),
('PS050', 'M0049'),
('PS050', 'M0050'),
('PS050', 'M0051'),
('PS051', 'M0065'),
('PS051', 'M0063'),
('PS051', 'M0057'),
('PS051', 'M0061'),
('PS052', 'M0062'),
('PS053', 'M0060'),
('PS053', 'M0059'),
('PS053', 'M0057'),
('PS054', 'M0063'),
('PS054', 'M0064'),
('PS055', 'M0061'),
('PS055', 'M0057'),
('PS056', 'M0059'),
('PS056', 'M0061'),
('PS057', 'M0060'),
('PS058', 'M0057'),
('PS059', 'M0058'),
('PS059', 'M0060'),
('PS059', 'M0062'),
('PS060', 'M0059'),
('PS060', 'M0065'),
('PS061', 'M0060'),
('PS062', 'M0061'),
('PS063', 'M0062'),
('PS063', 'M0058'),
('PS063', 'M0059'),
('PS064', 'M0064'),
('PS065', 'M0063'),
('PS066', 'M0065'),
('PS067', 'M0067'),
('PS067', 'M0068'),
('PS068', 'M0066'),
('PS069', 'M0072'),
('PS069', 'M0073'),
('PS069', 'M0074'),
('PS070', 'M0069'),
('PS071', 'M0075'),
('PS072', 'M0069'),
('PS072', 'M0074'),
('PS073', 'M0073'),
('PS074', 'M0072'),
('PS075', 'M0068'),
('PS076', 'M0066'),
('PS076', 'M0071'),
('PS077', 'M0070'),
('PS078', 'M0066'),
('PS078', 'M0072'),
('PS078', 'M0073'),
('PS078', 'M0075'),
('PS079', 'M0072'),
('PS079', 'M0074'),
('PS080', 'M0069'),
('PS080', 'M0070'),
('PS080', 'M0071'),
('PS082', 'M0049'),
('PS081', 'M0049');

SELECT * FROM Pesanan_Menu;

INSERT INTO Detail_Pesanan (id_detail_pesanan, jumlah_menu, total_harga, catatan_khusus, status_pesanan, pesanan_dp_id_pesanan)
VALUES
('DP001', 1, 25000.00, 'Tidak pedas', 'Siap', 'PS001'),
('DP002', 1, 45000.00, 'Tidak ada', 'Siap', 'PS002'),
('DP003', 1, 15000.00, 'Tambah gula', 'Baru', 'PS003'),
('DP004', 1, 35000.00, 'Roti tipis', 'Siap', 'PS004'),
('DP005', 1, 28000.00, 'Tidak ada', 'Siap', 'PS005'),
('DP006', 1, 90000.00, 'Medium rare', 'Proses', 'PS006'),
('DP007', 1, 50000.00, 'Tambahan wasabi', 'Siap', 'PS007'),
('DP008', 1, 18000.00, 'Tidak ada', 'Siap', 'PS008'),
('DP009', 1, 22000.00, 'Tidak ada', 'Siap', 'PS009'),
('DP010', 1, 19000.00, 'Tidak pakai pangsit', 'Baru', 'PS010'),
('DP011', 1, 17000.00, 'Tidak ada', 'Siap', 'PS011'),
('DP012', 1, 12000.00, 'Bakar kering', 'Siap', 'PS012'),
('DP013', 1, 15000.00, 'Tanpa timun', 'Siap', 'PS013'),
('DP014', 1, 12000.00, 'Tidak pedas', 'Proses', 'PS014'),
('DP015', 1, 18000.00, 'Tidak ada', 'Siap', 'PS015'),
('DP016', 1, 14000.00, 'Coklat dan kelapa', 'Siap', 'PS016'),
('DP017', 1, 10000.00, 'Tidak ada', 'Siap', 'PS017'),
('DP018', 1, 27000.00, 'Tidak ada', 'Baru', 'PS018'),
('DP019', 1, 20000.00, 'Tidak ada', 'Siap', 'PS019'),
('DP020', 1, 32000.00, 'Tidak ada', 'Siap', 'PS020'),
('DP021', 2, 14000.00, 'Tidak ada', 'Baru', 'PS021'),
('DP022', 1, 10000.00, 'Tidak ada', 'Siap', 'PS022'),
('DP023', 3, 22000.00, 'Tidak ada', 'Proses', 'PS023'),
('DP024', 1, 6000.00, 'Tidak ada', 'Siap', 'PS024'),
('DP025', 1, 8000.00, 'Tidak ada', 'Siap', 'PS025'),
('DP026', 2, 17500.00, 'Tidak ada', 'Baru', 'PS026'),
('DP027', 1, 7000.00, 'Tidak ada', 'Siap', 'PS027'),
('DP028', 1, 7000.00, 'Tidak ada', 'Siap', 'PS028'),
('DP029', 1, 15000.00, 'Tidak ada', 'Siap', 'PS029'),
('DP030', 2, 12000.00, 'Tidak ada', 'Siap', 'PS030'),
('DP031', 1, 6000.00, 'Tidak ada', 'Siap', 'PS031'),
('DP032', 4, 27000.00, 'Tidak ada', 'Proses', 'PS032'),
('DP033', 2, 15000.00, 'Tidak ada', 'Siap', 'PS033'),
('DP034', 3, 22500.00, 'Tidak ada', 'Siap', 'PS034'),
('DP035', 1, 10000.00, 'Tidak ada', 'Baru', 'PS035'),
('DP036', 1, 8000.00, 'Tidak ada', 'Proses', 'PS036'),
('DP037', 3, 34000.00, 'Tidak ada', 'Siap', 'PS037'),
('DP038', 1, 14000.00, 'Tidak ada', 'Siap', 'PS038'),
('DP039', 2, 22000.00, 'Tidak ada', 'Proses', 'PS039'),
('DP040', 1, 6000.00, 'Tidak ada', 'Siap', 'PS040'),
('DP041', 2, 19000.00, 'Tidak ada', 'Siap', 'PS041'),
('DP042', 1, 14000.00, 'Tidak ada', 'Siap', 'PS042'),
('DP043', 2, 25000.00, 'Tidak ada', 'Baru', 'PS043'),
('DP044', 1, 14000.00, 'Tidak ada', 'Proses', 'PS044'),
('DP045', 1, 8000.00, 'Tidak ada', 'Siap', 'PS045'),
('DP046', 1, 12000.00, 'Tidak ada', 'Siap', 'PS046'),
('DP047', 1, 1100.00, 'Tidak ada', 'Siap', 'PS047'),
('DP048', 2, 30000.00, 'Sambal Dipisah', 'Proses', 'PS048'),
('DP049', 2, 22000.00, 'Tidak ada', 'Siap', 'PS049'),
('DP050', 3, 34000.00, 'Tidak ada', 'Siap', 'PS050'),
('DP051', 4, 56000.00, 'Tidak ada', 'Siap', 'PS051'),
('DP052', 1, 6000.00, 'Extra Susu', 'Siap', 'PS052'),
('DP053', 3, 50000.00, 'Tidak ada', 'Proses', 'PS053'),
('DP054', 2, 20000.00, 'Tidak ada', 'Siap', 'PS054'),
('DP055', 2, 36000.00, 'Tidak ada', 'Baru', 'PS055'),
('DP056', 2, 30000.00, 'Tidak ada', 'Siap', 'PS056'),
('DP057', 1, 16000.00, 'Tidak ada', 'Siap', 'PS057'),
('DP058', 1, 20000.00, 'Tidak ada', 'Siap', 'PS058'),
('DP059', 3, 38000.00, 'Tidak ada', 'Proses', 'PS059'),
('DP060', 2, 28000.00, 'Tidak ada', 'Siap', 'PS060'),
('DP061', 1, 16000.00, 'Tidak ada', 'Siap', 'PS061'),
('DP062', 1, 16000.00, 'Tidak ada', 'Siap', 'PS062'),
('DP063', 3, 36000.00, 'Extra Susu', 'Siap', 'PS063'),
('DP064', 1, 14000.00, 'Tidak ada', 'Proses', 'PS064'),
('DP065', 1, 6000.00, 'Tidak ada', 'Siap', 'PS065'),
('DP066', 1, 14000.00, 'Tidak ada', 'Siap', 'PS066'),
('DP067', 2, 15000.00, 'Tidak ada', 'Siap', 'PS067'),
('DP068', 1, 10000.00, 'Tidak ada', 'Proses', 'PS068'),
('DP069', 3, 29000.00, 'Tidak ada', 'Siap', 'PS069'),
('DP070', 1, 4000.00, 'Tidak ada', 'Siap', 'PS070'),
('DP071', 1, 8000.00, 'Tidak ada', 'Baru', 'PS071'),
('DP072', 2, 14000.00, 'Tidak ada', 'Siap', 'PS072'),
('DP073', 1, 10000.00, 'Tidak ada', 'Siap', 'PS073'),
('DP074', 1, 9000.00, 'Tidak ada', 'Siap', 'PS074'),
('DP075', 1, 9000.00, 'Tidak ada', 'Siap', 'PS075'),
('DP076', 2, 20000.00, 'Tidak ada', 'Baru', 'PS076'),
('DP077', 1, 3000.00, 'Tidak ada', 'Siap', 'PS077'),
('DP078', 4, 37000.00, 'Tidak ada', 'Proses', 'PS078'),
('DP079', 2, 19000.00, 'Tidak ada', 'Siap', 'PS079'),
('DP080', 3, 17000.00, 'Tidak ada', 'Siap', 'PS080'),
('DP081', 1, 6000.00, 'Tidak pedas', 'Selesai', 'PS081'),
('DP082', 1, 6000.00, 'Tidak pedas', 'Selesai', 'PS082');

SELECT * FROM Detail_Pesanan;

DROP PROCEDURE IF EXISTS UpdateStokMenu;
DROP FUNCTION IF EXISTS CalculateTotalPrice;
DROP TRIGGER IF EXISTS AfterInsertPesananMenu;
DROP TRIGGER IF EXISTS BeforeInsertDetailPesanan;

CREATE PROCEDURE UpdateStokMenu(IN menu_id CHAR(5), IN jumlah INT)
BEGIN
    UPDATE Menu
    SET stok_menu = stok_menu - jumlah
    WHERE id_menu = menu_id;
END

CREATE FUNCTION CalculateTotalPrice(jumlah INT, harga DECIMAL(7,2)) RETURNS DECIMAL(7,2)
BEGIN
    DECLARE total DECIMAL(7,2);
    SET total = jumlah * harga;
    RETURN total;
END

CREATE TRIGGER AfterInsertPesananMenu
AFTER INSERT ON Pesanan_Menu
FOR EACH ROW
BEGIN
    CALL UpdateStokMenu(NEW.menu_id_menu, 1);
END

CREATE TRIGGER BeforeInsertDetailPesanan
BEFORE INSERT ON Detail_Pesanan
FOR EACH ROW
BEGIN
    DECLARE harga DECIMAL(7,2);
    SELECT harga_menu INTO harga FROM Menu WHERE id_menu = (SELECT menu_id_menu FROM Pesanan_Menu WHERE pesanan_pm_id_pesanan = NEW.pesanan_dp_id_pesanan);
    SET NEW.total_harga = CalculateTotalPrice(NEW.jumlah_menu, harga);
END